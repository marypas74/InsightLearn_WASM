/* =============================================================================
   ACCESSIBILITY CSS - WCAG 2.1 AA Compliance
   InsightLearn v2.1.0-dev
   Sprint 2 PageSpeed Optimization (A1, A2, A3)
   ============================================================================= */

/* =============================================================================
   1. FOCUS INDICATORS - Visible focus for keyboard navigation (WCAG 2.4.7)
   ============================================================================= */

/* Default focus ring - high contrast for all focusable elements */
:focus {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
}

/* Focus-visible for keyboard only (not mouse clicks) */
:focus:not(:focus-visible) {
    outline: none;
}

:focus-visible {
    outline: 3px solid #0066cc;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.25);
}

/* Enhanced focus for buttons */
button:focus-visible,
.btn:focus-visible,
a.btn:focus-visible {
    outline: 3px solid #0066cc;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.3);
    transition: box-shadow 0.15s ease-in-out;
}

/* Enhanced focus for form inputs */
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
.form-control:focus-visible {
    outline: 2px solid #0066cc;
    outline-offset: 1px;
    border-color: #0066cc;
    box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
}

/* Focus for links */
a:focus-visible {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
    border-radius: 2px;
}

/* Skip link focus */
.skip-link:focus {
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 100000;
    padding: 12px 24px;
    background-color: #0066cc;
    color: #ffffff;
    font-weight: 600;
    text-decoration: none;
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.skip-link {
    position: absolute;
    left: -9999px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

/* =============================================================================
   2. COLOR CONTRAST FIXES - WCAG AA (4.5:1 for text, 3:1 for large text)
   ============================================================================= */

/* Fix low contrast text colors */
.text-secondary,
.text-muted {
    color: #595959 !important; /* Contrast ratio 7:1 against white */
}

/* Fix placeholder contrast */
::placeholder {
    color: #6b7280; /* Contrast ratio 4.5:1 */
    opacity: 1;
}

/* Fix light gray text on white backgrounds */
.footer-link,
.footer-description {
    color: #9ca3af; /* Light on dark background is OK */
}

/* Fix category item text for better readability */
.category-item span {
    color: #1f2937; /* Near-black for maximum contrast */
}

/* Fix rating stars - ensure visible on any background */
.rating-stars .star {
    color: #f59e0b; /* Gold color with good contrast */
}

.rating-stars .star.empty {
    color: #9ca3af; /* Gray with sufficient contrast */
}

/* Fix badge text contrast */
.course-badge {
    font-weight: 600;
}

.course-badge.bestseller {
    background-color: #f59e0b;
    color: #1f2937; /* Dark text on gold background for 7:1 contrast */
}

.course-badge.new {
    background-color: #10b981;
    color: #ffffff; /* White on green for 4.5:1 contrast */
}

.course-badge.hot {
    background-color: #ef4444;
    color: #ffffff; /* White on red for 4.5:1 contrast */
}

/* Fix button text contrast */
.btn-outline {
    color: #1f2937;
    border-color: #6b7280;
}

.btn-outline:hover {
    background-color: #1f2937;
    color: #ffffff;
}

/* Fix form label contrast */
.form-label {
    color: #1f2937;
    font-weight: 500;
}

/* Fix validation message contrast */
.field-validation-error,
.validation-message {
    color: #dc2626; /* Red with 4.5:1 contrast against white */
    font-weight: 500;
}

/* Fix cart badge contrast */
.cart-badge {
    background-color: #dc2626;
    color: #ffffff;
    font-weight: 600;
}

/* =============================================================================
   3. SCREEN READER UTILITIES
   ============================================================================= */

/* Visually hidden but accessible to screen readers */
.sr-only,
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Show on focus for skip links */
.sr-only-focusable:focus,
.sr-only-focusable:active {
    position: static;
    width: auto;
    height: auto;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* =============================================================================
   4. MOTION PREFERENCES - Respect prefers-reduced-motion
   ============================================================================= */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    /* Disable parallax and floating animations */
    .hero-floating-elements,
    .floating-card,
    .particle {
        animation: none !important;
        transform: none !important;
    }
}

/* =============================================================================
   5. HIGH CONTRAST MODE SUPPORT
   ============================================================================= */

@media (prefers-contrast: more) {
    /* Increase all borders */
    button,
    input,
    select,
    textarea,
    .btn,
    .card {
        border-width: 2px;
        border-style: solid;
    }

    /* Force high contrast colors */
    :focus-visible {
        outline-width: 4px;
        outline-color: #000000;
    }

    /* Increase text contrast */
    body {
        color: #000000;
    }

    a {
        color: #0000ee;
        text-decoration: underline;
    }

    a:visited {
        color: #551a8b;
    }
}

/* =============================================================================
   6. INTERACTIVE ELEMENT MINIMUM SIZE (WCAG 2.5.5 - 44x44px touch target)
   ============================================================================= */

/* Ensure minimum touch target size for mobile */
@media (max-width: 768px) {
    button,
    a.btn,
    .nav-link,
    .dropdown-item,
    input[type="checkbox"],
    input[type="radio"] {
        min-height: 44px;
        min-width: 44px;
    }

    /* Increase tap area for icons */
    .icon-btn,
    .cart-btn,
    .user-menu-trigger {
        padding: 10px;
    }
}

/* =============================================================================
   7. ICON-ONLY BUTTON IMPROVEMENTS
   ============================================================================= */

/* Ensure icon-only buttons have visible text alternative */
[aria-label]::before {
    /* Screen readers will read aria-label */
}

/* Icon button styles */
.icon-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 44px;
    min-height: 44px;
    padding: 8px;
    border-radius: 8px;
    transition: background-color 0.15s ease;
}

.icon-btn:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

.icon-btn:focus-visible {
    outline: 3px solid #0066cc;
    outline-offset: 2px;
}

/* Password toggle button accessibility */
.password-toggle-btn {
    min-width: 44px;
    min-height: 44px;
}

/* =============================================================================
   8. LINK UNDERLINES FOR DISTINGUISHABILITY (WCAG 1.4.1)
   ============================================================================= */

/* Ensure links are distinguishable from text */
.content a:not(.btn):not(.card):not(.course-card) {
    text-decoration: underline;
    text-underline-offset: 2px;
}

.content a:not(.btn):not(.card):not(.course-card):hover {
    text-decoration-thickness: 2px;
}

/* =============================================================================
   9. ERROR STATE ACCESSIBILITY
   ============================================================================= */

/* Error messages with icon indicator */
.field-validation-error::before,
.validation-message::before {
    content: "âš  ";
    font-weight: bold;
}

/* Error input styling */
input.invalid,
input:invalid:not(:placeholder-shown),
.form-control.is-invalid {
    border-color: #dc2626;
    border-width: 2px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23dc2626' viewBox='0 0 16 16'%3E%3Cpath d='M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z'/%3E%3Cpath d='M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    padding-right: 40px;
}

/* =============================================================================
   10. TABLE ACCESSIBILITY
   ============================================================================= */

/* Table headers should be distinguishable */
table th {
    font-weight: 600;
    background-color: #f3f4f6;
    text-align: left;
}

/* Alternating row colors for readability */
table tbody tr:nth-child(even) {
    background-color: #f9fafb;
}

/* Table focus */
table:focus-within {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
}

/* =============================================================================
   11. LOADING STATES ACCESSIBILITY
   ============================================================================= */

/* Announce loading to screen readers */
[aria-busy="true"]::after {
    content: "";
    /* Screen reader will announce via aria-busy */
}

/* Loading spinner should not rely on color alone */
.spinner,
.loading-spinner {
    border-width: 3px;
    border-style: solid;
}
