<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <title>InsightLearn - Online Learning Platform | 500+ Courses</title>
    <base href="/" />

    <!-- ==========================================================================
         GOOGLE ANALYTICS 4 (GA4) - SEO Tracking
         Configured: 2025-12-13 | Property ID: 351495180 | Stream ID: 484824838
         Dashboard: https://analytics.google.com/analytics/web/#/a351495180p484824838/
         ========================================================================== -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J972BQGNY7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-J972BQGNY7', {
            'page_title': document.title,
            'page_location': window.location.href,
            'send_page_view': true
        });

        // Track course views, enrollments, and conversions
        function trackCourseView(courseId, courseName, category) {
            gtag('event', 'view_item', {
                'currency': 'EUR',
                'items': [{
                    'item_id': courseId,
                    'item_name': courseName,
                    'item_category': category
                }]
            });
        }

        function trackEnrollment(courseId, courseName, price) {
            gtag('event', 'purchase', {
                'currency': 'EUR',
                'value': price,
                'items': [{
                    'item_id': courseId,
                    'item_name': courseName
                }]
            });
        }
    </script>

    <!-- ==========================================================================
         GOOGLE SEARCH CONSOLE VERIFICATION
         Replace VERIFICATION_CODE with your GSC verification code
         Setup: https://search.google.com/search-console > Add property
         ========================================================================== -->
    <meta name="google-site-verification" content="VERIFICATION_CODE" />

    <!-- SEO Meta Tags -->
    <meta name="description" content="Learn coding, business, design and creative skills with InsightLearn. Access 500+ expert-led courses, interactive lessons, and AI-powered learning tools. Start your learning journey today!" />
    <meta name="keywords" content="online courses, e-learning, programming, web development, business skills, design courses, AI learning, video tutorials, InsightLearn" />
    <meta name="author" content="InsightLearn" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <link rel="canonical" href="https://wasm.insightlearn.cloud/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://wasm.insightlearn.cloud/" />
    <meta property="og:title" content="InsightLearn - Online Learning Platform" />
    <meta property="og:description" content="Access 500+ expert-led courses in programming, business, and design. Start learning today with AI-powered tools and interactive lessons." />
    <meta property="og:image" content="https://wasm.insightlearn.cloud/icon-192.png" />
    <meta property="og:site_name" content="InsightLearn" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://wasm.insightlearn.cloud/" />
    <meta name="twitter:title" content="InsightLearn - Online Learning Platform" />
    <meta name="twitter:description" content="Access 500+ expert-led courses. Learn programming, business, and design skills with AI-powered tools." />
    <meta name="twitter:image" content="https://wasm.insightlearn.cloud/icon-192.png" />

    <!-- Additional SEO -->
    <meta name="theme-color" content="#0073b1" />
    <meta name="msapplication-TileColor" content="#0073b1" />

    <!-- ==========================================================================
         SEO: JSON-LD Structured Data (PageSpeed S2)
         ========================================================================== -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "InsightLearn",
        "url": "https://wasm.insightlearn.cloud",
        "logo": "https://wasm.insightlearn.cloud/icon-192.png",
        "description": "Online learning platform with 500+ expert-led courses in programming, business, and design.",
        "sameAs": [],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "email": "support@insightlearn.cloud"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "InsightLearn",
        "url": "https://wasm.insightlearn.cloud",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://wasm.insightlearn.cloud/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "EducationalOrganization",
        "name": "InsightLearn",
        "url": "https://wasm.insightlearn.cloud",
        "description": "AI-powered online learning platform",
        "areaServed": "Worldwide",
        "availableLanguage": ["English", "Italian"]
    }
    </script>

    <!-- FAQPage Schema for e-learning FAQ rich results (SEO Sprint 3) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is InsightLearn?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "InsightLearn is a professional online learning platform offering 500+ expert-led courses in programming, web development, design, business, and more. Our platform features AI-powered learning tools, interactive video lessons, and progress tracking to help you master new skills at your own pace."
                }
            },
            {
                "@type": "Question",
                "name": "How do I access courses on InsightLearn?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Getting started is easy: 1) Create a free account on our platform, 2) Browse our course catalog or search for specific topics, 3) Enroll in courses - some are free, others require purchase, 4) Start learning immediately with unlimited access to enrolled courses, including video lessons, downloadable resources, and AI assistance."
                }
            },
            {
                "@type": "Question",
                "name": "Do I need prior experience to take courses?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "No prior experience is required for most beginner-level courses. Each course clearly indicates its skill level (Beginner, Intermediate, or Advanced) and any prerequisites. Our platform offers courses for all levels, from complete beginners to experienced professionals looking to advance their skills."
                }
            },
            {
                "@type": "Question",
                "name": "Can I earn certificates after completing courses?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! Upon completing a course, you receive a verified Certificate of Completion that you can add to your LinkedIn profile or resume. Certificates demonstrate your commitment to professional development and can help advance your career."
                }
            },
            {
                "@type": "Question",
                "name": "How much do courses cost?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "InsightLearn offers both free and premium courses. Free courses provide great introduction content, while premium courses (typically ‚Ç¨29.99-‚Ç¨99.99) include comprehensive materials, projects, quizzes, and certificates. We frequently offer discounts and promotions - check our courses page for current deals."
                }
            },
            {
                "@type": "Question",
                "name": "Can I access courses on mobile devices?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! InsightLearn is fully responsive and works on all devices - desktop computers, tablets, and smartphones. Learn anywhere, anytime with our mobile-optimized platform. Your progress syncs across all devices automatically."
                }
            },
            {
                "@type": "Question",
                "name": "Is there an AI assistant to help with learning?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! InsightLearn features an AI-powered chatbot assistant that can answer questions about course content, provide explanations, help with coding problems, and offer personalized learning recommendations. The AI assistant is available 24/7 to support your learning journey."
                }
            }
        ]
    }
    </script>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="apple-touch-icon" href="icon-192.png" />

    <!-- ==========================================================================
         PERFORMANCE: Resource Hints (PageSpeed P2, P7)
         ========================================================================== -->
    <!-- DNS Prefetch for external domains -->
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />
    <link rel="dns-prefetch" href="https://www.paypal.com" />
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />

    <!-- Preconnect for critical external resources -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />

    <!-- Preload Font Awesome fonts (critical for icons) -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous" />

    <!-- ==========================================================================
         CRITICAL CSS INLINE (Sprint 3 - FE-3 PageSpeed Optimization)
         Above-the-fold styles for fast First Contentful Paint (FCP)
         ========================================================================== -->
    <style>
        /* CSS Custom Properties - Design Tokens */
        :root {
            --primary-color: #a435f0;
            --primary-hover: #8710d8;
            --primary-light: #f7ecff;
            --gray-50: #f7f9fa;
            --gray-100: #f2f3f5;
            --gray-200: #e4e8eb;
            --gray-300: #d1d7db;
            --gray-500: #6b7280;
            --gray-700: #3c4043;
            --gray-900: #1c1d1f;
            --white: #ffffff;
            --header-height: 72px;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --transition-fast: 150ms ease;
        }

        /* Critical Base Styles */
        *, *::before, *::after { box-sizing: border-box; }
        html, body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            font-family: var(--font-family);
            font-size: 16px;
            line-height: 1.6;
            color: var(--gray-900);
            background-color: var(--gray-50);
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            overflow-y: auto !important;
        }

        /* Critical Layout - Main Container */
        .main-layout {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: var(--gray-50);
        }

        /* Critical Header - Sticky Positioning */
        .main-header {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
            z-index: 10001;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .main-header-container {
            height: var(--header-height);
            display: grid;
            grid-template-columns: minmax(200px, auto) 1fr minmax(300px, auto);
            align-items: center;
            padding: 0 24px;
            gap: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Loading Skeleton Styles */
        .loading-skeleton {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            padding: 2rem;
            opacity: 1;
            transition: opacity 0.3s ease-out;
        }

        .loading-skeleton.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .skeleton-header {
            width: 100%;
            max-width: 1200px;
            height: 72px;
            background: linear-gradient(90deg, var(--gray-100) 25%, var(--gray-200) 50%, var(--gray-100) 75%);
            background-size: 200% 100%;
            animation: skeleton-shimmer 1.5s infinite;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .skeleton-hero {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .skeleton-title {
            width: 60%;
            height: 48px;
            background: linear-gradient(90deg, var(--gray-100) 25%, var(--gray-200) 50%, var(--gray-100) 75%);
            background-size: 200% 100%;
            animation: skeleton-shimmer 1.5s infinite;
            border-radius: 8px;
        }

        .skeleton-text {
            width: 80%;
            height: 24px;
            background: linear-gradient(90deg, var(--gray-100) 25%, var(--gray-200) 50%, var(--gray-100) 75%);
            background-size: 200% 100%;
            animation: skeleton-shimmer 1.5s infinite;
            border-radius: 4px;
        }

        .skeleton-button {
            width: 200px;
            height: 48px;
            background: linear-gradient(90deg, var(--primary-light) 25%, #e8d5f9 50%, var(--primary-light) 75%);
            background-size: 200% 100%;
            animation: skeleton-shimmer 1.5s infinite;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .skeleton-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            width: 100%;
            max-width: 1200px;
            margin-top: 3rem;
        }

        .skeleton-card {
            height: 280px;
            background: linear-gradient(90deg, var(--gray-100) 25%, var(--gray-200) 50%, var(--gray-100) 75%);
            background-size: 200% 100%;
            animation: skeleton-shimmer 1.5s infinite;
            border-radius: 12px;
        }

        @keyframes skeleton-shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Loading spinner fallback */
        .blazor-loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--gray-200);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--gray-500);
            font-size: 14px;
            margin-top: 0.5rem;
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .skeleton-header, .skeleton-title, .skeleton-text,
            .skeleton-button, .skeleton-card, .blazor-loading-spinner {
                animation: none;
            }
        }
    </style>

    <!-- ==========================================================================
         CRITICAL CSS - Load synchronously (above-the-fold)
         ========================================================================== -->
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Bootstrap Framework (critical) -->
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />

    <!-- Core Layout CSS (critical) -->
    <link rel="stylesheet" href="css/site.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/header-v2.css" />

    <!-- ==========================================================================
         DEFERRED CSS - Load asynchronously (below-the-fold)
         Using media="print" onload pattern for non-blocking CSS
         ========================================================================== -->
    <!-- Design System CSS (deferred) -->
    <link rel="stylesheet" href="css/design-system.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/design-system-base.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/design-system-components.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/design-system-dashboard.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/design-system-utilities.css" media="print" onload="this.media='all'" />

    <!-- Component CSS (deferred) -->
    <link rel="stylesheet" href="css/components.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/chatbot.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/cookie-consent-wall.css" media="print" onload="this.media='all'" />

    <!-- Page-specific CSS (deferred) -->
    <link rel="stylesheet" href="css/auth-styles.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/modern-registration.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/homepage-modern.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/homepage-enhancements.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/new-home-2025.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/admin.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/admin-components.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/admin-dashboard.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/admin-instructors.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/admin-payments.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/courses.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/cart.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/checkout.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/video-components.css" media="print" onload="this.media='all'" />

    <!-- LinkedIn Learning Style System (v2.1.0) -->
    <link rel="stylesheet" href="css/linkedin-learning-tokens.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/linkedin-learning-components.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/linkedin-learning-animations.css" media="print" onload="this.media='all'" />
    <!-- Learning Space v3 MUST load AFTER linkedin-learning-components to override sidebar styles -->
    <link rel="stylesheet" href="css/learning-space-v3.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/pricing.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/account-subscription.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/instructor-earnings.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/profile.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/my-courses.css" media="print" onload="this.media='all'" />

    <!-- Site-wide CSS (deferred) -->
    <link rel="stylesheet" href="css/connection-handler.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="css/app.css" media="print" onload="this.media='all'" />

    <!-- Accessibility CSS - WCAG 2.1 AA Compliance (Sprint 2) -->
    <link rel="stylesheet" href="css/accessibility.css" media="print" onload="this.media='all'" />

    <!-- Global Responsive CSS - MUST load LAST to override everything -->
    <link rel="stylesheet" href="css/responsive.css" media="print" onload="this.media='all'" />

    <!-- Scoped Styles -->
    <link href="InsightLearn.WebAssembly.styles.css" rel="stylesheet" media="print" onload="this.media='all'" />

    <!-- NoScript fallback for CSS -->
    <noscript>
        <link rel="stylesheet" href="css/design-system.css" />
        <link rel="stylesheet" href="css/components.css" />
        <link rel="stylesheet" href="css/responsive.css" />
        <link rel="stylesheet" href="css/accessibility.css" />
        <link href="InsightLearn.WebAssembly.styles.css" rel="stylesheet" />
    </noscript>

    <!-- PayPal SDK (Sandbox Mode - Deferred for better performance) -->
    <!-- Note: Replace client-id with production key for live -->
    <script defer src="https://www.paypal.com/sdk/js?client-id=sb&currency=EUR&disable-funding=credit,card"></script>
</head>

<body>
    <!-- Static GDPR wall shown immediately (before Blazor loads) -->
    <div id="static-cookie-wall" class="cookie-wall-overlay" style="display: none;">
        <div class="cookie-wall-container">
            <div class="cookie-wall-modal">
                <div class="cookie-modal-content">
                    <div class="ai-avatar-section">
                        <div class="ai-avatar-container">
                            <div class="ai-hologram">
                                <div class="logo-container">
                                    <img src="icon-192.png" alt="InsightLearn Logo" class="insightlearn-logo" />
                                </div>
                                <div class="ai-glow"></div>
                            </div>
                        </div>
                        <h3 class="ai-name">InsightLearn</h3>
                        <p class="ai-subtitle">Online Learning Platform</p>
                        <div class="ai-message">
                            <p>"Welcome to InsightLearn! We use cookies to personalize your learning experience."</p>
                            <p class="ai-message-secondary">"Your privacy matters! Please review our cookie policy."</p>
                        </div>
                    </div>
                    <div class="cookie-content-section">
                        <div class="cookie-wall-header">
                            <div class="cookie-icon-wrapper">
                                <span class="cookie-icon">üç™</span>
                            </div>
                            <h1 class="cookie-wall-title">We value your privacy</h1>
                            <p class="cookie-wall-subtitle">
                                Please wait while we load your personalized experience...
                            </p>
                        </div>
                        <div class="cookie-wall-body">
                            <div class="cookie-simple-info">
                                <p class="cookie-description">
                                    By clicking "Accept All Cookies", you agree to the storing of cookies on your device to enhance site navigation,
                                    analyze site usage, and assist in our marketing efforts. We respect your privacy and are committed to protecting your data.
                                </p>
                                <div class="cookie-features-grid">
                                    <div class="cookie-feature">
                                        <span class="feature-icon">üîí</span>
                                        <span class="feature-text">Secure & Encrypted</span>
                                    </div>
                                    <div class="cookie-feature">
                                        <span class="feature-icon">‚ö°</span>
                                        <span class="feature-text">Enhanced Performance</span>
                                    </div>
                                    <div class="cookie-feature">
                                        <span class="feature-icon">üéØ</span>
                                        <span class="feature-text">Personalized Experience</span>
                                    </div>
                                    <div class="cookie-feature">
                                        <span class="feature-icon">üìä</span>
                                        <span class="feature-text">Analytics & Insights</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="cookie-wall-footer">
                            <div class="cookie-links">
                                <a href="/privacy-policy" target="_blank" class="cookie-link">Privacy Policy</a>
                                <span class="link-separator">‚Ä¢</span>
                                <a href="/cookie-policy" target="_blank" class="cookie-link">Cookie Policy</a>
                            </div>
                            <div class="cookie-actions">
                                <button class="btn-cookie-settings" onclick="alert('Please wait for the application to load fully to access detailed settings.')">
                                    <span class="btn-icon">‚öôÔ∏è</span>
                                    Cookie Settings
                                </button>
                                <button class="btn-cookie-reject" onclick="rejectAllCookiesStatic()">
                                    <span class="btn-icon">‚úï</span>
                                    Reject All
                                </button>
                                <button class="btn-cookie-accept" onclick="acceptAllCookiesStatic()">
                                    <span class="btn-icon">‚úì</span>
                                    Accept All Cookies
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="app" style="opacity: 0; transition: opacity 0.3s;">
        <!-- Loading Skeleton for better LCP (Sprint 3 - PageSpeed) -->
        <div class="loading-skeleton" id="loading-skeleton">
            <div class="skeleton-header"></div>
            <div class="skeleton-hero">
                <div class="skeleton-title"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text" style="width: 60%;"></div>
                <div class="skeleton-button"></div>
            </div>
            <div class="skeleton-cards">
                <div class="skeleton-card"></div>
                <div class="skeleton-card"></div>
                <div class="skeleton-card"></div>
                <div class="skeleton-card"></div>
            </div>
            <div class="blazor-loading-spinner"></div>
            <p class="loading-text">Loading InsightLearn...</p>
        </div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">üóô</a>
    </div>

    <!-- Show static GDPR wall immediately if no consent -->
    <script>
        // Functions for static GDPR wall (before Blazor loads)
        function acceptAllCookiesStatic() {
            var consentData = {
                necessary: true,
                analytics: true,
                marketing: true,
                functional: true,
                timestamp: new Date().getTime()
            };
            localStorage.setItem('cookie-consent', JSON.stringify(consentData));
            console.log('[STATIC-GDPR] Consent saved (Accept All)');
            hideStaticWall();
        }

        function rejectAllCookiesStatic() {
            var consentData = {
                necessary: true,
                analytics: false,
                marketing: false,
                functional: false,
                timestamp: new Date().getTime()
            };
            localStorage.setItem('cookie-consent', JSON.stringify(consentData));
            console.log('[STATIC-GDPR] Consent saved (Reject All)');
            hideStaticWall();
        }

        function hideStaticWall() {
            var staticWall = document.getElementById('static-cookie-wall');
            if (staticWall) {
                staticWall.style.display = 'none';
                document.body.style.overflow = '';
                console.log('[STATIC-GDPR] Static wall hidden, consent saved');
            }
        }

        (function() {
            // Check for existing consent immediately
            var hasConsent = false;
            try {
                var consentData = localStorage.getItem('cookie-consent');
                if (consentData) {
                    var consent = JSON.parse(consentData);
                    var now = new Date().getTime();
                    var expiryTime = consent.timestamp + (365 * 24 * 60 * 60 * 1000);
                    hasConsent = now <= expiryTime;
                }
            } catch (e) {
                console.error('Error checking consent:', e);
            }

            // Show static GDPR wall immediately if no consent
            if (!hasConsent) {
                document.getElementById('static-cookie-wall').style.display = 'flex';
                // CRITICAL: DO NOT set overflow:hidden on body - breaks position:sticky header
                // The cookie wall has position:fixed and covers everything already
                console.log('[STATIC-GDPR] Showing cookie wall immediately (no consent found)');
            } else {
                console.log('[STATIC-GDPR] Consent exists, hiding static wall');
            }

            // Hide static wall when Blazor loads (Blazor component will take over)
            window.addEventListener('DOMContentLoaded', function() {
                setTimeout(function() {
                    var staticWall = document.getElementById('static-cookie-wall');
                    if (staticWall && !hasConsent) {
                        // Keep showing until Blazor component renders
                        console.log('[STATIC-GDPR] Blazor loaded, waiting for component...');
                    }
                }, 100);
            });
        })();
    </script>

    <!-- HTTP Client Helper for cross-origin requests -->
    <script src="js/httpClient.js"></script>

    <script src="_framework/blazor.webassembly.js"></script>
    <!-- Sticky Header Enhancement - Dynamic shadow effect -->
    <!-- DISABLED: JavaScript interferes with CSS position:sticky - Use pure CSS instead -->
    <!-- <script src="js/sticky-header-enhancement.js"></script> -->
    <script src="js/cookie-consent-wall.js"></script>
    <script src="js/new-home-2025.js"></script>

    <!-- Video Player JS Interop (Student Learning Space v2.1.0) -->
    <script src="js/videoPlayer.js"></script>

    <!-- Session Timeout - User Activity Tracking (v2.1.0-dev) -->
    <script src="js/sessionTimeout.js"></script>

    <!-- PayPal Checkout Integration -->
    <script src="js/paypal-checkout.js"></script>

    <!-- Hide static wall, fade out skeleton, and show app after Blazor loads -->
    <script>
        window.addEventListener('load', function() {
            setTimeout(function() {
                // Check consent before hiding GDPR wall
                var hasConsent = false;
                try {
                    var consentData = localStorage.getItem('cookie-consent');
                    if (consentData) {
                        var consent = JSON.parse(consentData);
                        var now = new Date().getTime();
                        var expiryTime = consent.timestamp + (365 * 24 * 60 * 60 * 1000);
                        hasConsent = now <= expiryTime;
                    }
                } catch (e) {
                    console.error('[APP] Error checking consent:', e);
                }

                // Hide static GDPR wall ONLY if consent exists
                var staticWall = document.getElementById('static-cookie-wall');
                if (staticWall && hasConsent) {
                    staticWall.style.display = 'none';
                    console.log('[STATIC-GDPR] Blazor component ready, consent exists, hiding static wall');
                } else if (staticWall && !hasConsent) {
                    console.log('[STATIC-GDPR] Blazor component ready, NO consent, keeping wall visible');
                    // Blazor component will take over
                }

                // Fade out loading skeleton (Sprint 3 - PageSpeed)
                var skeleton = document.getElementById('loading-skeleton');
                if (skeleton) {
                    skeleton.classList.add('fade-out');
                    // Remove from DOM after fade animation completes
                    setTimeout(function() {
                        skeleton.remove();
                        console.log('[SKELETON] Loading skeleton removed');
                    }, 300);
                }

                // Show app with fade-in
                var app = document.getElementById('app');
                if (app) {
                    app.style.opacity = '1';
                    console.log('[APP] Blazor loaded, showing application');
                }
            }, 500);
        });
    </script>

    <!-- Chart.js Library (async for non-blocking load) -->
    <script async src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Chart Helper Functions -->
    <script src="js/chart-helpers.js"></script>

    <!-- CSRF Token Helper - Reads XSRF-TOKEN cookie for CSRF protection -->
    <script>
        // Helper function to read cookies (used by CSRF protection middleware)
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) {
                return parts.pop().split(';').shift();
            }
            return null;
        }

        // Download file helper for CSV export (Analytics Dashboard)
        function downloadFile(filename, contentType, base64Content) {
            const link = document.createElement('a');
            link.href = 'data:' + contentType + ';base64,' + base64Content;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Scroll to bottom helper for AI Chat Panel (v2.2.0)
        function scrollToBottom(element) {
            if (element) {
                element.scrollTo({
                    top: element.scrollHeight,
                    behavior: 'smooth'
                });
            }
        }

        // Copy to clipboard helper for AI Chat Panel (v2.2.0)
        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                return navigator.clipboard.writeText(text)
                    .then(() => true)
                    .catch(() => false);
            }
            // Fallback for older browsers
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                document.body.removeChild(textarea);
                return Promise.resolve(true);
            } catch (e) {
                document.body.removeChild(textarea);
                return Promise.resolve(false);
            }
        }

        // Check if element is scrolled to bottom (for auto-scroll control)
        function isScrolledToBottom(element) {
            if (!element) return true;
            const threshold = 50; // pixels from bottom to consider "at bottom"
            return element.scrollHeight - element.scrollTop - element.clientHeight < threshold;
        }
    </script>
</body>

</html>
