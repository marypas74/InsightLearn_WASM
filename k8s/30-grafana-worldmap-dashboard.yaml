# =============================================================================
# Grafana World Map Dashboard - Real GeoIP Data
# InsightLearn WASM - Visitor Geolocation Visualization
# Created: 2025-12-26
# =============================================================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-worldmap-dashboard
  namespace: insightlearn
  labels:
    grafana_dashboard: "1"
    app: grafana
data:
  worldmap-dashboard.json: |
    {
      "annotations": {
        "list": []
      },
      "description": "Real-time visitor geolocation from Cloudflare headers",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": null,
      "links": [],
      "liveNow": true,
      "panels": [
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
          "id": 100,
          "panels": [],
          "title": "üåç Visitor World Map",
          "type": "row"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Real visitor locations from Cloudflare GeoIP headers",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "custom": {
                "hideFrom": { "legend": false, "tooltip": false, "viz": false }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "blue", "value": null },
                  { "color": "green", "value": 10 },
                  { "color": "yellow", "value": 50 },
                  { "color": "orange", "value": 100 },
                  { "color": "red", "value": 500 }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": { "h": 16, "w": 24, "x": 0, "y": 1 },
          "id": 1,
          "options": {
            "basemap": {
              "config": {},
              "name": "Layer 0",
              "type": "default"
            },
            "controls": {
              "mouseWheelZoom": true,
              "showAttribution": true,
              "showDebug": false,
              "showMeasure": false,
              "showScale": false,
              "showZoom": true
            },
            "layers": [
              {
                "config": {
                  "showLegend": true,
                  "style": {
                    "color": {
                      "field": "Value",
                      "fixed": "dark-green"
                    },
                    "opacity": 0.7,
                    "rotation": { "fixed": 0, "max": 360, "min": -360, "mode": "mod" },
                    "size": { "field": "Value", "fixed": 5, "max": 30, "min": 5 },
                    "symbol": { "fixed": "img/icons/marker/circle.svg", "mode": "fixed" },
                    "symbolAlign": { "horizontal": "center", "vertical": "center" },
                    "text": { "field": "country", "fixed": "", "mode": "field" },
                    "textConfig": { "fontSize": 12, "offsetX": 0, "offsetY": 0, "textAlign": "center", "textBaseline": "middle" }
                  }
                },
                "location": { "gazetteer": "public/gazetteer/countries.json", "lookup": "country", "mode": "lookup" },
                "name": "Visitors by Country",
                "tooltip": true,
                "type": "markers"
              }
            ],
            "tooltip": { "mode": "details" },
            "view": {
              "allLayers": true,
              "id": "zero",
              "lat": 30,
              "lon": 0,
              "zoom": 2
            }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "sum by (country) (count_over_time({job=\"nginx-geoip\"} | json | country != \"\" [$__range]))",
              "legendFormat": "{{country}}",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "üó∫Ô∏è Visitor Locations - World Map",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": { "mode": "columns" }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": { "Time": true },
                "indexByName": {},
                "renameByName": { "Value #A": "Value" }
              }
            }
          ],
          "type": "geomap"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 17 },
          "id": 101,
          "panels": [],
          "title": "üìä Country Statistics",
          "type": "row"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Top countries by visitor count",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "lineWidth": 1,
                "scaleDistribution": { "type": "linear" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 18 },
          "id": 2,
          "options": {
            "barRadius": 0.1,
            "barWidth": 0.8,
            "colorByField": "country",
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": { "calcs": [], "displayMode": "list", "placement": "right", "showLegend": true },
            "orientation": "horizontal",
            "showValue": "always",
            "stacking": "none",
            "tooltip": { "mode": "single", "sort": "none" },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "topk(10, sum by (country) (count_over_time({job=\"nginx-geoip\"} | json | country != \"\" [$__range])))",
              "legendFormat": "{{country}}",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "üèÜ Top 10 Countries",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": { "mode": "columns" }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [{ "desc": true, "field": "Value #A" }]
              }
            }
          ],
          "type": "barchart"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Visitor distribution by country",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
              "mappings": [],
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 6, "x": 12, "y": 18 },
          "id": 3,
          "options": {
            "displayLabels": ["name", "percent"],
            "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] },
            "pieType": "pie",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "tooltip": { "mode": "single", "sort": "none" }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "sum by (country) (count_over_time({job=\"nginx-geoip\"} | json | country != \"\" [$__range]))",
              "legendFormat": "{{country}}",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "ü•ß Country Distribution",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": { "mode": "columns" }
            }
          ],
          "type": "piechart"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Detailed visitor statistics by country",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "custom": {
                "align": "auto",
                "cellOptions": { "type": "auto" },
                "filterable": true,
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "country" },
                "properties": [
                  { "id": "custom.width", "value": 100 },
                  { "id": "displayName", "value": "Country" }
                ]
              },
              {
                "matcher": { "id": "byName", "options": "Value #A" },
                "properties": [
                  { "id": "displayName", "value": "Visits" },
                  { "id": "custom.cellOptions", "value": { "mode": "gradient", "type": "gauge" } }
                ]
              }
            ]
          },
          "gridPos": { "h": 8, "w": 6, "x": 18, "y": 18 },
          "id": 4,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "enablePagination": false,
              "fields": "",
              "reducer": ["sum"],
              "show": true
            },
            "showHeader": true,
            "sortBy": [{ "desc": true, "displayName": "Visits" }]
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "sum by (country) (count_over_time({job=\"nginx-geoip\"} | json | country != \"\" [$__range]))",
              "legendFormat": "{{country}}",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "üìã Country Details",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": { "mode": "columns" }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [{ "desc": true, "field": "Value #A" }]
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 },
          "id": 102,
          "panels": [],
          "title": "üìà Traffic Over Time",
          "type": "row"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Visitor traffic over time by country",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "none",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 24, "x": 0, "y": 27 },
          "id": 5,
          "options": {
            "legend": { "calcs": ["sum"], "displayMode": "table", "placement": "right", "showLegend": true },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "sum by (country) (count_over_time({job=\"nginx-geoip\"} | json | country != \"\" [$__interval]))",
              "legendFormat": "{{country}}",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "üìà Traffic by Country Over Time",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Total requests over time",
          "fieldConfig": {
            "defaults": {
              "color": { "fixedColor": "blue", "mode": "fixed" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "bars",
                "fillOpacity": 50,
                "gradientMode": "opacity",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 24, "x": 0, "y": 35 },
          "id": 6,
          "options": {
            "legend": { "calcs": ["sum", "mean"], "displayMode": "list", "placement": "bottom", "showLegend": true },
            "tooltip": { "mode": "single", "sort": "none" }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "sum(count_over_time({job=\"nginx-geoip\"} [$__interval]))",
              "legendFormat": "Total Requests",
              "queryType": "range",
              "refId": "A"
            }
          ],
          "title": "üìä Total Traffic Over Time",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 41 },
          "id": 103,
          "panels": [],
          "title": "üèôÔ∏è City Details",
          "type": "row"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Top cities by visitor count",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "lineWidth": 1,
                "scaleDistribution": { "type": "linear" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 42 },
          "id": 7,
          "options": {
            "barRadius": 0.1,
            "barWidth": 0.8,
            "colorByField": "city",
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": { "calcs": [], "displayMode": "list", "placement": "right", "showLegend": true },
            "orientation": "horizontal",
            "showValue": "always",
            "stacking": "none",
            "tooltip": { "mode": "single", "sort": "none" },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "topk(15, sum by (city) (count_over_time({job=\"nginx-geoip\"} | json | city != \"\" [$__range])))",
              "legendFormat": "{{city}}",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "üèôÔ∏è Top 15 Cities",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": { "mode": "columns" }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [{ "desc": true, "field": "Value #A" }]
              }
            }
          ],
          "type": "barchart"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "HTTP status code distribution",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
              "mappings": [],
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "200" },
                "properties": [{ "id": "color", "value": { "fixedColor": "green", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "304" },
                "properties": [{ "id": "color", "value": { "fixedColor": "blue", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "404" },
                "properties": [{ "id": "color", "value": { "fixedColor": "yellow", "mode": "fixed" } }]
              },
              {
                "matcher": { "id": "byName", "options": "500" },
                "properties": [{ "id": "color", "value": { "fixedColor": "red", "mode": "fixed" } }]
              }
            ]
          },
          "gridPos": { "h": 8, "w": 6, "x": 12, "y": 42 },
          "id": 8,
          "options": {
            "displayLabels": ["name", "percent"],
            "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] },
            "pieType": "donut",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "tooltip": { "mode": "single", "sort": "none" }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "sum by (status) (count_over_time({job=\"nginx-geoip\"} | json | status != \"\" [$__range]))",
              "legendFormat": "{{status}}",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "üìä HTTP Status Codes",
          "transformations": [
            {
              "id": "labelsToFields",
              "options": { "mode": "columns" }
            }
          ],
          "type": "piechart"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Key performance indicators",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 6, "x": 18, "y": 42 },
          "id": 9,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false },
            "textMode": "auto"
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "count(sum by (country) (count_over_time({job=\"nginx-geoip\"} | json | country != \"\" [$__range])))",
              "legendFormat": "Countries",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "üåç Unique Countries",
          "type": "stat"
        },
        {
          "datasource": { "type": "loki", "uid": "loki" },
          "description": "Total visitor count",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "blue", "value": null },
                  { "color": "green", "value": 100 },
                  { "color": "yellow", "value": 1000 }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 6, "x": 18, "y": 46 },
          "id": 10,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false },
            "textMode": "auto"
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "loki", "uid": "loki" },
              "editorMode": "code",
              "expr": "sum(count_over_time({job=\"nginx-geoip\"} [$__range]))",
              "legendFormat": "Total",
              "queryType": "instant",
              "refId": "A"
            }
          ],
          "title": "üë• Total Visits",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 50 },
          "id": 104,
          "panels": [],
          "title": "üíæ Server Disk Space",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "Server disk space usage",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 70 },
                  { "color": "orange", "value": 80 },
                  { "color": "red", "value": 90 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 0, "y": 51 },
          "id": 11,
          "options": {
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "100 - ((node_filesystem_avail_bytes{mountpoint=\"/\"} / node_filesystem_size_bytes{mountpoint=\"/\"}) * 100)",
              "legendFormat": "Root /",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "üíæ Root Disk Usage %",
          "type": "gauge"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "Home partition disk usage",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 70 },
                  { "color": "orange", "value": 80 },
                  { "color": "red", "value": 90 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 6, "y": 51 },
          "id": 12,
          "options": {
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "100 - ((node_filesystem_avail_bytes{mountpoint=\"/home\"} / node_filesystem_size_bytes{mountpoint=\"/home\"}) * 100)",
              "legendFormat": "Home /home",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "üíæ Home Disk Usage %",
          "type": "gauge"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "Available disk space per partition",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "lineWidth": 1,
                "scaleDistribution": { "type": "linear" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 12, "x": 12, "y": 51 },
          "id": 13,
          "options": {
            "barRadius": 0.1,
            "barWidth": 0.8,
            "colorByField": "mountpoint",
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": { "calcs": [], "displayMode": "list", "placement": "right", "showLegend": true },
            "orientation": "horizontal",
            "showValue": "always",
            "stacking": "none",
            "tooltip": { "mode": "single", "sort": "none" },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "node_filesystem_avail_bytes{fstype=~\"ext4|xfs|zfs\"}",
              "legendFormat": "{{mountpoint}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "üìä Available Space by Partition",
          "type": "barchart"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "Filesystem usage table",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "custom": {
                "align": "auto",
                "cellOptions": { "type": "auto" },
                "filterable": true,
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Size" },
                "properties": [{ "id": "unit", "value": "bytes" }]
              },
              {
                "matcher": { "id": "byName", "options": "Available" },
                "properties": [{ "id": "unit", "value": "bytes" }]
              },
              {
                "matcher": { "id": "byName", "options": "Used %" },
                "properties": [
                  { "id": "unit", "value": "percent" },
                  { "id": "custom.cellOptions", "value": { "mode": "gradient", "type": "gauge" } },
                  { "id": "thresholds", "value": { "mode": "absolute", "steps": [
                    { "color": "green", "value": null },
                    { "color": "yellow", "value": 70 },
                    { "color": "red", "value": 90 }
                  ] } }
                ]
              }
            ]
          },
          "gridPos": { "h": 6, "w": 24, "x": 0, "y": 57 },
          "id": 14,
          "options": {
            "cellHeight": "sm",
            "footer": { "countRows": false, "enablePagination": false, "fields": "", "reducer": ["sum"], "show": false },
            "showHeader": true
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "node_filesystem_size_bytes{fstype=~\"ext4|xfs|zfs\"}",
              "format": "table",
              "legendFormat": "__auto",
              "range": true,
              "refId": "Size"
            },
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "node_filesystem_avail_bytes{fstype=~\"ext4|xfs|zfs\"}",
              "format": "table",
              "legendFormat": "__auto",
              "range": true,
              "refId": "Available"
            },
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "100 - ((node_filesystem_avail_bytes{fstype=~\"ext4|xfs|zfs\"} / node_filesystem_size_bytes{fstype=~\"ext4|xfs|zfs\"}) * 100)",
              "format": "table",
              "legendFormat": "__auto",
              "range": true,
              "refId": "UsedPercent"
            }
          ],
          "title": "üìã Filesystem Details",
          "transformations": [
            {
              "id": "merge",
              "options": {}
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": { "Time": true, "__name__": true, "device": true, "instance": true, "job": true },
                "indexByName": { "mountpoint": 0, "fstype": 1 },
                "renameByName": { "Value #Size": "Size", "Value #Available": "Available", "Value #UsedPercent": "Used %" }
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 63 },
          "id": 105,
          "panels": [],
          "title": "üñ•Ô∏è Kubernetes Cluster Resources",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "Pod count by status",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 0, "y": 64 },
          "id": 15,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "textMode": "auto"
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "sum(kube_pod_status_phase{namespace=\"insightlearn\", phase=\"Running\"})",
              "legendFormat": "Running",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "üü¢ Running Pods",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "Total deployments",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "blue", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 4, "y": 64 },
          "id": 16,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "textMode": "auto"
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "count(kube_deployment_created{namespace=\"insightlearn\"})",
              "legendFormat": "Deployments",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "üì¶ Deployments",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "Server memory usage",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "yellow", "value": 70 },
                  { "color": "red", "value": 85 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 8, "y": 64 },
          "id": 17,
          "options": {
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "100 - ((node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100)",
              "legendFormat": "Memory",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "üß† Memory Usage",
          "type": "gauge"
        },
        {
          "datasource": { "type": "prometheus", "uid": "prometheus" },
          "description": "CPU load average 1 min",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "none",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 12, "x": 12, "y": 64 },
          "id": 18,
          "options": {
            "legend": { "calcs": ["mean", "max"], "displayMode": "list", "placement": "bottom", "showLegend": true },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "node_load1",
              "legendFormat": "Load 1m",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "node_load5",
              "legendFormat": "Load 5m",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": { "type": "prometheus", "uid": "prometheus" },
              "editorMode": "code",
              "expr": "node_load15",
              "legendFormat": "Load 15m",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "üìà CPU Load Average",
          "type": "timeseries"
        }
      ],
      "refresh": "30s",
      "schemaVersion": 39,
      "tags": ["geoip", "worldmap", "visitors", "loki"],
      "templating": { "list": [] },
      "time": { "from": "now-24h", "to": "now" },
      "timepicker": {},
      "timezone": "browser",
      "title": "üåç Visitor World Map",
      "uid": "visitor-worldmap",
      "version": 1
    }
